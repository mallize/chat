{"version":3,"sources":["../../src/data/filterAtIndex.js"],"names":["filterAtIndex","fn","index","list","length","idx","filtered","result","then","resolvedResult","push"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,MAAMA,aAAa,GAAG,oBACpB,mBAAK,eAAL,EAAsB,CAACC,EAAD,EAAKC,KAAL,EAAYC,IAAZ,KAAqB;AACzC,MAAI,CAAC,0BAAYA,IAAZ,CAAL,EAAwB;AACtB,UAAM,kCAAoB,WAApB,EAAiCA,IAAjC,CAAN;AACD;;AAHwC,QAIjCC,MAJiC,GAItBD,IAJsB,CAIjCC,MAJiC;AAKzC,MAAIC,GAAG,GAAGH,KAAK,IAAI,CAAnB;;AACA,MAAIG,GAAG,GAAG,CAAV,EAAa;AACXA,IAAAA,GAAG,GAAGD,MAAM,GAAGC,GAAf;AACD;;AACD,MAAIA,GAAG,GAAG,CAAV,EAAa;AACXA,IAAAA,GAAG,GAAG,CAAN;AACD;;AAED,QAAMC,QAAQ,GAAG,EAAjB;;AACA,SAAOD,GAAG,GAAGD,MAAb,EAAqB;AACnB,UAAMG,MAAM,GAAGN,EAAE,CAACE,IAAI,CAACE,GAAD,CAAL,EAAYA,GAAZ,CAAjB;;AACA,QAAI,wBAAUE,MAAV,CAAJ,EAAuB;AACrB,aAAOA,MAAM,CAACC,IAAP,CAAaC,cAAD,IAAoB;AACrC,YAAIA,cAAJ,EAAoB;AAClBH,UAAAA,QAAQ,CAACI,IAAT,CAAcP,IAAI,CAACE,GAAD,CAAlB;AACD;;AACD,eAAO,qBAAOC,QAAP,EAAiBN,aAAa,CAACC,EAAD,EAAKI,GAAG,GAAG,CAAX,EAAcF,IAAd,CAA9B,CAAP;AACD,OALM,CAAP;AAMD,KAPD,MAOO,IAAII,MAAJ,EAAY;AACjBD,MAAAA,QAAQ,CAACI,IAAT,CAAcP,IAAI,CAACE,GAAD,CAAlB;AACD;;AACDA,IAAAA,GAAG,IAAI,CAAP;AACD;;AACD,SAAOC,QAAP;AACD,CA7BD,CADoB,CAAtB;eAiCeN,a","sourcesContent":["import concat from './concat'\nimport curry from '../common/curry'\nimport defn from '../common/defn'\nimport errorUnexpectedType from './errors/errorUnexpectedType'\nimport isArrayLike from '../lang/isArrayLike'\nimport isPromise from '../lang/isPromise'\n\n/**\n * Takes a predicate and a `Filterable`, and returns a new filterable of the same type containing the members of the given filterable which satisfy the given predicate starting from the given index. Filterable objects include plain objects or any object that has a filter method such as `Array`.\n *\n * Dispatches to the `filter` method of the second argument, if present.\n *\n * Supports async predicates. If a predicate returns a Promise than the entire method will upgrade to async and return a Promise.\n *\n * @function\n * @since v0.0.6\n * @category data\n * @param {Function} fn The predicate function.\n * @param {Integer} index The index to start at.\n * @param {Array} list The array to consider.\n * @returns {Array} The filtered list\n * @example\n *\n * const isEven = n => n % 2 === 0;\n *\n * filterAtIndex(isEven, 0, [1, 2, 3, 4]) //=> [2, 4]\n * filterAtIndex(isEven, 2, [1, 2, 3, 4]) //=> [4]\n *\n * await filter(async (value) => isEven(value), [1, 2, 3, 4]) //=> [2, 4]\n */\nconst filterAtIndex = curry(\n  defn('filterAtIndex', (fn, index, list) => {\n    if (!isArrayLike(list)) {\n      throw errorUnexpectedType('ArrayLike', list)\n    }\n    const { length } = list\n    let idx = index || 0\n    if (idx < 0) {\n      idx = length + idx\n    }\n    if (idx < 0) {\n      idx = 0\n    }\n\n    const filtered = []\n    while (idx < length) {\n      const result = fn(list[idx], idx)\n      if (isPromise(result)) {\n        return result.then((resolvedResult) => {\n          if (resolvedResult) {\n            filtered.push(list[idx])\n          }\n          return concat(filtered, filterAtIndex(fn, idx + 1, list))\n        })\n      } else if (result) {\n        filtered.push(list[idx])\n      }\n      idx += 1\n    }\n    return filtered\n  })\n)\n\nexport default filterAtIndex\n"],"file":"filterAtIndex.js"}