{"version":3,"sources":["../../src/data/reduce.js"],"names":["reduce","iteratee","accumulator","collection","accum","next","pNext","done","value","kdx","nextAccum"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,MAAMA,MAAM,GAAG,oBACb,mBAAK,QAAL,EAAe,CAACC,QAAD,EAAWC,WAAX,EAAwBC,UAAxB,KAAuC;AACpD,MAAIC,KAAK,GAAGF,WAAZ;AACA,SAAO,sBACJG,IAAD,IACE,mBACGC,KAAD,IAAW;AACT,QAAIA,KAAK,CAACC,IAAV,EAAgB;AACd,aAAOH,KAAP;AACD;;AACD,WAAOH,QAAQ,CAACG,KAAD,EAAQE,KAAK,CAACE,KAAd,EAAqBF,KAAK,CAACG,GAA3B,CAAf;AACD,GANH,EAOGC,SAAD,IAAe;AACbN,IAAAA,KAAK,GAAGM,SAAR;;AACA,QAAIL,IAAI,CAACE,IAAT,EAAe;AACb,+BACKF,IADL;AAEEG,QAAAA,KAAK,EAAEJ;AAFT;AAID;;AACD,WAAOC,IAAP;AACD,GAhBH,EAiBEA,IAjBF,CAFG,EAoBLF,UApBK,CAAP;AAsBD,CAxBD,CADa,CAAf;eA4BeH,M","sourcesContent":["import curry from '../common/curry'\nimport defn from '../common/defn'\nimport iterate from '../common/iterate'\nimport pipe from '../common/pipe'\n\n/**\n * Returns a single item by iterating through the collection, successively calling the iterator function and passing it an accumulator value and the current value from the collection, and then passing the result to the next call.\n *\n * The iterator function receives three values: *(acc, value, kdx)*.\n *\n * Note: This method automatically upgrades to async.\n * - If an async `iteratee` is given to this method it will return a Promise.\n * - If a Promise is given for `iteratee`, `accumulator`, or `collection`, this method will resolve the Promise(s) and return a Promise\n *\n * Note: for arrays, `reduce` does not skip deleted or unassigned indices (sparse arrays), unlike the native `Array.prototype.reduce` method. For more details  on this behavior, see:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n *\n * Dispatches to the `reduce` method of the third argument, if present.\n *\n * This method will resolve the parameters but it will not resolve the values passed to the iteratee. It will only resolve the values returned by the iteratee.\n *\n * @function\n * @since v0.0.3\n * @category data\n * @param {Function} iteratee The iterator function. Receives three values, the accumulator, the current value from the collection and the key or index.\n * @param {*} accumulator The accumulator value.\n * @param {Array|string|Object|Promise} collection The collection to iterate over.\n * @returns {*} The final, accumulated value.\n * @example\n *\n * reduce((accum, value, key) => {\n *   ...\n *   return accum\n * }, myAccum, myObject)\n *\n * reduce((accum, value, index) => {\n *   ...\n *   return accum\n * }, myAccum, myArray)\n *\n * reduce((accum, value) => {\n *   accum.push(value)\n *   return accum\n * }, [], [ Promise.resolve('foo') ]) // => [ Promise { 'foo' } ]\n *\n *\n * reduce(subtract, 0, [1, 2, 3, 4]) // => ((((0 - 1) - 2) - 3) - 4) = -10\n * //          -               -10\n * //         / \\              / \\\n * //        -   4           -6   4\n * //       / \\              / \\\n * //      -   3   ==>     -3   3\n * //     / \\              / \\\n * //    -   2           -1   2\n * //   / \\              / \\\n * //  0   1            0   1\n */\nconst reduce = curry(\n  defn('reduce', (iteratee, accumulator, collection) => {\n    let accum = accumulator\n    return iterate(\n      (next) =>\n        pipe(\n          (pNext) => {\n            if (pNext.done) {\n              return accum\n            }\n            return iteratee(accum, pNext.value, pNext.kdx)\n          },\n          (nextAccum) => {\n            accum = nextAccum\n            if (next.done) {\n              return {\n                ...next,\n                value: accum\n              }\n            }\n            return next\n          }\n        )(next),\n      collection\n    )\n  })\n)\n\nexport default reduce\n"],"file":"reduce.js"}